{% extends 'layout.html' %}
{% set current_page = 'Taller' %}
<h2>{% block title %}Facturación{% endblock %}</h2>
<!-- <script src="{{url_for('static', filename='js/billing.js')}}"></script> -->


{% block content %}

<!-- Page Heading -->
<div class="d-sm-flex justify-content-end mb-4">
    <h1 class="h1 mb-0 text-gray-800 flex-grow-1">Facturación</h1>
    <a href="{{url_for('billing.get_billing')}}" class="btn btn-primary btn-circle btn-lg m-1">
        <i class="fas fa-list"></i>
    </a>
</div>

<script>
    // Función para agregar una nueva fila a la tabla de detalles
    function agregarDetalle() {
        var fila = '<tr>' +
            '<td><input type="text" name="detalle" required></td>' +
            '<td><input type="number" name="cantidad" required></td>' +
            '<td><input type="number" name="precio_unitario" required></td>' +
            '</tr>';
        $('#tabla-detalles').append(fila);
    }
</script>

<!-- Content Row -->
<div class="card o-hidden border-0 shadow-lg my-5">
    <div class="card-body p-0">
        <!-- New Row Form cabecera de factura -->
        <div class="row">
            <div class="col-lg-12">
                <div class="p-5">
                    <div class="text-left">
                        <h3 class="text-gray-900 mb-4">Nueva Factura</h3>

                        <form method="post" action="{{url_for('billing.create_billing')}}">
                            <label for="numero">Número de Factura:</label>
                            <input type="text" id="numero" name="numero" required>
                            <br>
                            <label for="fecha">Fecha:</label>
                            <input type="date" id="fecha" name="fecha" required>
                            <br>
                            <label for="detalles">Detalles de Factura:</label>
                            <table id="tabla-detalles">
                                <tr>
                                    <th>Descripción</th>
                                    <th>Cantidad</th>
                                    <th>Precio Unitario</th>
                                </tr>
                                <tr>
                                    <td><input type="text" name="detalle" required></td>
                                    <td><input type="number" name="cantidad" required></td>
                                    <td><input type="number" name="precio_unitario" required></td>
                                </tr>
                            </table>
                            <br>
                            <input type="button" value="Agregar Detalle" onclick="agregarDetalle()">
                            <!-- Botón para agregar detalle -->
                            <br>
                            <input type="submit" value="Crear Factura">
                        </form>


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



{% endblock %}