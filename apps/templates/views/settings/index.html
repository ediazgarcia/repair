<!DOCTYPE html>
<html lang="es">

<head>
    {% extends 'layout.html' %}
    {% set current_page = 'Configuración' %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>{% block title %}Configuración{% endblock %}</title>
</head>
{% block content %}

<body class="fixed-sn">
    <main>
        <div class="container-fluid mt-auto">
            <h1>Configuración</h1>
            <br>
            <div style="height: 2000px">
                <ul class="nav nav-tabs nav-justified md-tabs unique-color" id="myTabJust" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="usuarios-tab-just" data-toggle="tab" href="#usuarios-just"
                            role="tab" aria-controls="usuarios-just" aria-selected="false">Usuarios</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="empresa-tab-just" data-toggle="tab" href="#empresa-just" role="tab"
                            aria-controls="empresa-just" aria-selected="true">Empresa</a>
                    </li>
                </ul>
                <div class="tab-content card pt-5" id="myTabContentJust">
                    <div class="tab-pane fade show active abs-center" id="usuarios-just" role="tabpanel"
                        aria-labelledby="usuarios-tab-just">
                        <div class="d-flex flex-row">
                            <h2 class="d-flex flex-row">Todos los Usuarios</h2>
                            <a class="btn btn-floating unique-color dropdown-toggle ml-auto" type="button"
                                data-toggle="modal" data-target="#NvoUsuario" aria-haspopup="true"
                                aria-expanded="false"><i class="fas fa-plus"></i></a>
                        </div>
                        <table id="example" class="table table-hover table-responsive" style="width:100%">
                            <thead>
                                <tr>
                                    <th class="th-sm">Nombre Completo
                                    </th>
                                    <th class="th-sm">Nombre de Usuario
                                    </th>
                                    <th class="th-sm">Correo Electrónico
                                    </th>
                                    <th class="th-sm">Rol</th>
                                    <th class="th-sm">Estado
                                    </th>
                                    <th class="th-sm">Registrado
                                    </th>
                                    <th class="th-sm">Actualizado
                                    </th>
                                    <th class="th-sm">Editar
                                    </th>
                                    <th class="th-sm">Eliminar
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for user in users%}
                                <tr>
                                    <td>{{user.name}}</td>
                                    <td>{{user.username}}</td>
                                    <td>{{user.email}}</td>
                                    <td>{{user.role}}</td>
                                    {% if user.active %}
                                    <td>Activo</td>
                                    {% else %}
                                    <td>Inactivo</td>
                                    {% endif %}
                                    <td>{{user.created}}</td>
                                    <td>{{user.updated}}</td>
                                    <td>
                                        <button id="update-btn-{{ user.id }}" class="btn unique-color btn-sm m-0"
                                            data-toggle="modal" data-target="#EditUsuario">
                                            <i class="fas fa-pencil white-text"></i>
                                        </button>
                                    </td>
                                    <td>
                                        <button id="delete-btn-{{ user.id }}" class="btn red btn-sm m-0"
                                            data-id="{{ user.id }}" onclick="deleteUser({{ user.id }})">
                                            <i class="fas fa-trash white-text"></i>
                                        </button>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane fade" id="empresa-just" role="tabpanel" aria-labelledby="empresa-tab-just">
                        <h2 class='mb-3'>Perfil de la Empresa</h2>
                        <form class="border border-light p-5" action="#!">
                            <div class="form-row">
                                <div class="form-group col-md-11">
                                    <label for="RazonEp">Razón Social</label>
                                    <input type="text" id="RazonEp" class="form-control">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-4">
                                    <label for="RNC-CedulaEp">RNC/Cédula</label>
                                    <input type="text" id="NoDocEp" class="form-control">
                                </div>
                                <div class="form-group col-md-8">
                                    <label for="NombreEp">Nombre Comercial</label>
                                    <input type="text" id="NombreEp" class="form-control">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-8">
                                    <label for="CorreoEp">Correo Electrónico</label>
                                    <input type="mail" id="CorreoEp" class="form-control">
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="TelefonoEp">Teléfono</label>
                                    <input type="text" id="TelefonoEp" class="form-control">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="inputGroupFileAddon01">Logo</span>
                                    </div>
                                    <div class="custom-file">
                                        <input type="file" class="custom-file-input" id="LogoEp"
                                            aria-describedby="inputGroupFileAddon01">
                                        <label class="custom-file-label" for="LogoEp">Elegir imagen</label>
                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <label for="DireccionEp">Dirección</label>
                                    <input type="text" id="DireccionEp" class="form-control">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="CiudadEp">Provincia</label>
                                    <select id="CiudadEp" class="form-control">
                                        <option value=""></option>
                                    </select>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="MunicipioEp">Municipio</label>
                                    <select id="MunicipioEp" class="form-control">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>
                            <button type="submit" class="btn unique-color text-white">Guardar</button>
                        </form>
                    </div>
                </div>
            </div>
            <!-- Nuevo Usuario -->
            <div class="modal fade" id="NvoUsuario" tabindex="-1" role="dialog" aria-labelledby="NvoUsuarioLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2 class="modal-title" id="NvoUsusarioLabel">Nuevo Usuario</h2>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form class="border border-light p-5" action="{{url_for('users.create_user')}}"
                                method="POST">
                                <div class="form-row">
                                    <div class="form-group col-md-12">
                                        <label for="NombreUs">Nombre Completo</label>
                                        <input type="text" id="NombreUs" name="fullname" class="form-control">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-12">
                                        <label for="CorreoUs">Correo Electrónico</label>
                                        <input type="mail" id="CorreoUs" name="email" class="form-control">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="UsuarioUs">Nombre de Usuario</label>
                                        <input type="text" id="UsuarioUs" name="username" class="form-control">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="ContrasenaUs">Contraseña</label>
                                        <input type="password" id="ContrasenaUs" name="password" class="form-control">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="EstadoUs">Estado</label>
                                        <select id="EstadoUs" name="estado" class="form-control">
                                            <option value="" disabled selected></option>
                                            <option value="1">Activo</option>
                                            <option value="0">Inactivo</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="Role">Role</label>
                                        <select id="Role" name="role" class="form-control">
                                            <option value="" disabled selected></option>
                                            <option value="Administrador">Administrador</option>
                                            <option value="Usuario">Usuario</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="submit" class="btn unique-color text-white">Registrar</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Editar Usuario -->
            <div class="modal fade" id="EditUsuario" tabindex="-1" role="dialog" aria-labelledby="EditUsuarioLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2 class="modal-title" id="EditUsusarioLabel">Editar Usuario</h2>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form class="border border-light p-5" action="{{ url_for('users.update_user') }}"
                                method="POST">
                                <div class="form-row">
                                    <div class="form-group col-md-12">
                                        <label for="NombreUs">Nombre Completo</label>
                                        <input type="text" id="NombreUs" name="fullname" value="" class="form-control">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-12">
                                        <label for="CorreoUs">Correo Electrónico</label>
                                        <input type="mail" id="CorreoUs" name="email" value="" class="form-control">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="UsuarioUs">Nombre de Usuario</label>
                                        <input type="text" id="UsuarioUs" name="username" value="" class="form-control">
                                    </div>
                                    <!-- <div class="form-group col-md-6">
                                        <label for="ContrasenaUs">Contraseña</label>
                                        <input type="password" id="ContrasenaUs" name="password" class="form-control">
                                    </div> -->
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="EstadoUs">Estado</label>
                                        <select id="EstadoUs" value="" name="estado" class="form-control">
                                            <option value="" disabled selected></option>
                                            <option value="1">Activo</option>
                                            <option value="0">Inactivo</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="Role">Role</label>
                                        <select id="Role" name="role" value="" class="form-control">
                                            <option value="" disabled selected></option>
                                            <option value="Administrador">Administrador</option>
                                            <option value="Usuario">Usuario</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="submit" class="btn unique-color text-white">Registrar</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!--Main Layout-->
    <!-- End your project here-->
    <script>
        function deleteUser(userId) {
            // Construir la URL utilizando url_for y el userId
            var url = "{{ url_for('users.delete_user', id=0) }}".replace("0", userId);

            // Redirigir a la ruta correspondiente
            window.location.href = url;
        }

        function updateUser(userId) {
            // Construir la URL utilizando url_for y el userId
            var url = "{{ url_for('users.update_user', id=0) }}".replace("0", userId);

            // Redirigir a la ruta correspondiente
            window.location.href = url;
        }


    </script>
</body>
{% endblock%}





</html>